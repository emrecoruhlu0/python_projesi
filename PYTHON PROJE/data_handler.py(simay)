#movies.json'da bulunan filmleri tekrar etmeyecek şekilde collection.json dosyasında her giriş yapan kişinin listelerine giriyor.
import json

with open('collection.json', 'r', encoding='utf-8') as collection_file:
    collection_data = json.load(collection_file)

with open('movies.json', 'r', encoding='utf-8') as movies_file:
    movies_data = json.load(movies_file)

def add_missing_movies(collection_data, movies_data):
    for person, movies in collection_data.items():
        existing_movies = {movie["adı"] for movie in movies}
        
        for movie in movies_data:
            # Eğer film o kişide yoksa, ekleyelim
            if movie["adı"] not in existing_movies:
                collection_data[person].append(movie)

    return collection_data

updated_collection_data = add_missing_movies(collection_data, movies_data)

with open('collection.json', 'w', encoding='utf-8') as collection_file:
    json.dump(updated_collection_data, collection_file, ensure_ascii=False, indent=4)
